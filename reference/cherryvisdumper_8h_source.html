<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>TorchCraftAI: src/modules/cherryvisdumper.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TorchCraftAI
   </div>
   <div id="projectbrief">A bot for machine learning research on StarCraft: Brood War</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ddb4d7e95cc2d6c8e1ade10a20d7247d.html">modules</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">cherryvisdumper.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2017-present, Facebook, Inc.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This source code is licensed under the MIT license found in the</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * LICENSE file in the root directory of this source tree.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;blackboard.h&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;buildtype.h&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;cherrypi.h&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;module.h&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;state.h&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;unitsinfo.h&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;fmt/format.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;nlohmann/json.hpp&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;thread&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;variant&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacecherrypi.html">cherrypi</a> {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">class </span>CherryVisLogSink;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define CVIS_LOG(state)                                    \</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">  if (auto _cvisDumper = state-&gt;board()-&gt;getTraceDumper()) \</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">  _cvisDumper-&gt;getGlobalLogger().getStream(state, __FILE__, __LINE__)</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#define CVIS_LOG_UNIT(state, unit)                         \</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">  if (auto _cvisDumper = state-&gt;board()-&gt;getTraceDumper()) \</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">  _cvisDumper-&gt;getUnitLogger(unit).getStream(state, __FILE__, __LINE__)</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * Records bot internal state and dumps it to a file readable by CherryVis.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html">   36</a></span>&#160;<span class="keyword">class </span><a class="code" href="classcherrypi_1_1CherryVisDumperModule.html">CherryVisDumperModule</a> : <span class="keyword">public</span> <a class="code" href="classcherrypi_1_1Module.html">Module</a> {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keyword">class </span><a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a>;</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#a37c60fefda8540ada19fea2c0d3a1934">   39</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a37c60fefda8540ada19fea2c0d3a1934">Dumpable</a> = std::variant&lt;Unit*, Position, int, float, std::string&gt;;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">   41</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a> {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;   <span class="keyword">public</span>:</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> _U&gt;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html">   44</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html">TypeInfo</a> {</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html#acc5df2f51a1175e52ba3a3e2ed1b3a3d">   45</a></span>&#160;      <span class="keyword">static</span> constexpr <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html#acc5df2f51a1175e52ba3a3e2ed1b3a3d">kName</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    };</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#define ACCEPT_TYPE(TYPE)                       \</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">  template &lt;typename _U&gt;                        \</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">  struct TypeInfo&lt;TYPE, _U&gt; {                   \</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">    static constexpr const char* kName = #TYPE; \</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">  };</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#ac3eb4994eab5e28b4e583bca5c907dd1">ACCEPT_TYPE</a>(<a class="code" href="structcherrypi_1_1Unit.html">Unit</a>*);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#ac3eb4994eab5e28b4e583bca5c907dd1">ACCEPT_TYPE</a>(<a class="code" href="classcherrypi_1_1Vec2T.html">Position</a>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#ac3eb4994eab5e28b4e583bca5c907dd1">ACCEPT_TYPE</a>(<span class="keywordtype">int</span>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#ac3eb4994eab5e28b4e583bca5c907dd1">ACCEPT_TYPE</a>(<span class="keywordtype">float</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#ac3eb4994eab5e28b4e583bca5c907dd1">ACCEPT_TYPE</a>(std::string);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#ac3eb4994eab5e28b4e583bca5c907dd1">ACCEPT_TYPE</a>(<a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a37c60fefda8540ada19fea2c0d3a1934">Dumpable</a>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html">   59</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html">LoggerStream</a> {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;     <span class="keyword">public</span>:</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#aff02b76416d2846736b7ecd798921a0a">   61</a></span>&#160;      <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a>;</div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a81571f9401d43dd6d46a1c35c69ab5aa">   62</a></span>&#160;      <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a81571f9401d43dd6d46a1c35c69ab5aa">LoggerStream</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* state, <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a>&amp; logger, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename, <span class="keywordtype">int</span> line)</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;          : state_(state), logger_(logger), filename_(filename), line_(line) {}</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a80dd87b8d734dbc168b34f93deacba2f">   64</a></span>&#160;      <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a80dd87b8d734dbc168b34f93deacba2f">~LoggerStream</a>() {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        logger_.addMessage(</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            state_, message_.str(), std::move(attachments_), filename_, line_);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#adbd90dc7e25beb72f05b564f92b8089d">   70</a></span>&#160;      <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html">LoggerStream</a>&amp; <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#adbd90dc7e25beb72f05b564f92b8089d">operator&lt;&lt;</a>(T <span class="keyword">const</span>&amp; m) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        message_ &lt;&lt; m;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span> K, <span class="keyword">typename</span> V&gt;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#ac4bf5bd35daaf7e88cd8d9a975337ebd">   76</a></span>&#160;      <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html">LoggerStream</a>&amp; operator&lt;&lt;(std::unordered_map&lt;K, V&gt; m) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        static_assert(<a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html">TypeInfo&lt;K, void&gt;::kName</a>, <span class="stringliteral">&quot;Map Key has invalid type&quot;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        static_assert(<a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html">TypeInfo&lt;V, void&gt;::kName</a>, <span class="stringliteral">&quot;Map Value has invalid type&quot;</span>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        attachments_.push_back({</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            {<span class="stringliteral">&quot;map&quot;</span>, std::move(m)},</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            {<span class="stringliteral">&quot;key_type&quot;</span>, <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html">TypeInfo&lt;K, void&gt;::kName</a>},</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            {<span class="stringliteral">&quot;value_type&quot;</span>, <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html">TypeInfo&lt;V, void&gt;::kName</a>},</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        });</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;     <span class="keyword">protected</span>:</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#ae4e1d8b338936a3cad35602c362e564a">   88</a></span>&#160;      std::stringstream <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#ae4e1d8b338936a3cad35602c362e564a">message_</a>;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#ac1fe830f69e18fa70f14104e0e875c41">   89</a></span>&#160;      std::vector&lt;nlohmann::json&gt; <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#ac1fe830f69e18fa70f14104e0e875c41">attachments_</a>;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a1f48909205b82a16d4b7d68c2166aca5">   90</a></span>&#160;      <a class="code" href="classcherrypi_1_1State.html">State</a>* <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a1f48909205b82a16d4b7d68c2166aca5">state_</a>;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#aae66a6b76cb03830328ec6ca00b6d510">   91</a></span>&#160;      <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a>&amp; <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#aae66a6b76cb03830328ec6ca00b6d510">logger_</a>;</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a209bd2a88f6d8cd48d45a860688b7283">   92</a></span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a209bd2a88f6d8cd48d45a860688b7283">filename_</a>;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#af4c7379270a46864287deb60ad5f1a4e">   93</a></span>&#160;      <span class="keywordtype">int</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#af4c7379270a46864287deb60ad5f1a4e">line_</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    };</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a4a44c89d59bd13f6333fb96fdcec9dff">   96</a></span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html">LoggerStream</a> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a4a44c89d59bd13f6333fb96fdcec9dff">getStream</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* state, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename, <span class="keywordtype">int</span> line) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html">LoggerStream</a>(state, *<span class="keyword">this</span>, filename, line);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#af47328322156d39ef0a10142eda8522d">addMessage</a>(</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="classcherrypi_1_1State.html">State</a>* state,</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        std::string message,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        std::vector&lt;nlohmann::json&gt; attachments = {},</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* full_filename = <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordtype">int</span> line = 0,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        google::LogSeverity severity = 0);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a1ee9453506d3c03b33ad6d99a04362a0">  108</a></span>&#160;    nlohmann::json <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a1ee9453506d3c03b33ad6d99a04362a0">to_json</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a7ecdafbd63d3bdfa53072c411ac548a7">logs_</a>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <span class="keyword">protected</span>:</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a7ecdafbd63d3bdfa53072c411ac548a7">  113</a></span>&#160;    std::vector&lt;nlohmann::json&gt; <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a7ecdafbd63d3bdfa53072c411ac548a7">logs_</a>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  };</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#ae8d6567980890d2781e135fe6c8de239">~CherryVisDumperModule</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#a704b8766018e5d5035b93973b539f4d1">  118</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a704b8766018e5d5035b93973b539f4d1">setReplayFile</a>(std::string <span class="keyword">const</span>&amp; replayFile) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a05d2e098d035061fc066a2faf87f9a56">replayFileName_</a> = replayFile;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#af1cdf5db27ae82a842961a51d46d22b8">step</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* s) <span class="keyword">override</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a24af1767050d1f9ab4bb9cd91b0d9d0f">onGameStart</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* s) <span class="keyword">override</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#ab99da1772de414fdfb05f5d9423688b5">onGameEnd</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* s) <span class="keyword">override</span>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#a2c998f5e0b6cb72d395b7ada23ae10b1">  126</a></span>&#160;  <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a>&amp; <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a2c998f5e0b6cb72d395b7ada23ae10b1">getGlobalLogger</a>() {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">trace_</a>.<a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad2d8392a893c92698780f03d9ab33b81">logs_</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#ab0ac1cbe4d52ad76a4cbfc3c173ab612">  130</a></span>&#160;  <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a>&amp; <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#ab0ac1cbe4d52ad76a4cbfc3c173ab612">getUnitLogger</a>(<a class="code" href="structcherrypi_1_1Unit.html">Unit</a>* u) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">trace_</a>.<a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a31ed85d5512fb326793785d83454bed1">unitsLogs_</a>[std::to_string(u-&gt;<a class="code" href="structcherrypi_1_1Unit.html#acf03d67ca94d4f884d471f48c12d0635">id</a>)];</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a9d24283fa83f8ba41a75d5320bfe418a">onDrawCommand</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* s, tc::Client::Command <span class="keyword">const</span>&amp; command);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> V, <span class="keyword">typename</span> W&gt;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a8e9bd865cdcfb4466e558ff2b4d06b79">addTree</a>(</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="classcherrypi_1_1State.html">State</a>* s,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      std::string <span class="keyword">const</span>&amp; <a class="code" href="classcherrypi_1_1Module.html#ad7300b77897752ed01933510e3ce70aa">name</a>,</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      T dump_node,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      V get_children,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      W root);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#aaef546c69332b507729add7b78281f0b">dumpTensorsSummary</a>(</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <a class="code" href="classcherrypi_1_1State.html">State</a>* s,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      std::unordered_map&lt;std::string, ag::Variant&gt; <span class="keyword">const</span>&amp; tensors);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">   * Dumps a heatmap that can be displayed as overlay of the terrain.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">   * \param{tensors} is expected to be a dict of 2 dimensionnal at::Tensor</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">   * in a [y, x] order.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a5aa63e9a5f2cb75c406f8b03a1042b7d">dumpTerrainHeatmaps</a>(</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="classcherrypi_1_1State.html">State</a>* s,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      std::unordered_map&lt;std::string, ag::Variant&gt; <span class="keyword">const</span>&amp; tensors,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      std::array&lt;int, 2&gt; <span class="keyword">const</span>&amp; topLeftPixel,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      std::array&lt;float, 2&gt; <span class="keyword">const</span>&amp; scalingToPixels);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#aacf43d13ce7ad7caac87c33ba2b50571">  158</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#aacf43d13ce7ad7caac87c33ba2b50571">dumpGameValue</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* s, std::string <span class="keyword">const</span>&amp; key, <span class="keywordtype">float</span> value) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">trace_</a>.<a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a641432b0b979fda97086e68cb5038378">gameValues_</a>[std::to_string(s-&gt;<a class="code" href="classcherrypi_1_1State.html#a89332955236c46ca09175a429767fc63">currentFrame</a>())][key] = value;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a5e192b2fadf69b48d6c1a093e7003fbd">writeGameSummary</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* final_state, std::string <span class="keyword">const</span>&amp; file);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html">  164</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html">TreeNode</a> : <span class="keyword">public</span> std::stringstream {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="keyword">public</span>:</div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#aeb7cd5da48373c20327b4e2f187fb607">  166</a></span>&#160;    std::vector&lt;std::shared_ptr&lt;TreeNode&gt;&gt; <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#aeb7cd5da48373c20327b4e2f187fb607">children</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a4537e5d1b0bac91856dcf77b1c5196af">  168</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a4537e5d1b0bac91856dcf77b1c5196af">setModule</a>(std::string name) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      node[<span class="stringliteral">&quot;module&quot;</span>] = <a class="code" href="classcherrypi_1_1Module.html#ad7300b77897752ed01933510e3ce70aa">name</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#aec705fbf0af1c3e7a042f9e3530f8d88">  171</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#aec705fbf0af1c3e7a042f9e3530f8d88">setFrame</a>(<a class="code" href="namespacecherrypi.html#ab05e5ebd40b8067b1efffc1e08fbe299">FrameNum</a> f) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      node[<span class="stringliteral">&quot;frame&quot;</span>] = f;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a264867b8aad8905c3bdbecd27e0c545a">  174</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a264867b8aad8905c3bdbecd27e0c545a">setId</a>(int32_t <span class="keywordtype">id</span>, std::string prefix = <span class="stringliteral">&quot;&quot;</span>) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      node[<span class="stringliteral">&quot;id&quot;</span>] = id;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      node[<span class="stringliteral">&quot;type_prefix&quot;</span>] = prefix;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#ae356087521877c29f6ccca43bf3c1fb2">  178</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#ae356087521877c29f6ccca43bf3c1fb2">addUnitWithProb</a>(<a class="code" href="structcherrypi_1_1Unit.html">Unit</a>* unit, <span class="keywordtype">float</span> proba) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      prob_distr.push_back({{<span class="stringliteral">&quot;type_prefix&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>},</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                            {<span class="stringliteral">&quot;id&quot;</span>, unit ? unit-&gt;<a class="code" href="structcherrypi_1_1Unit.html#acf03d67ca94d4f884d471f48c12d0635">id</a> : -1},</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                            {<span class="stringliteral">&quot;proba&quot;</span>, proba}});</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a26e227c276dfcf8bad85617f461dc4de">  183</a></span>&#160;    nlohmann::json <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a26e227c276dfcf8bad85617f461dc4de">to_json</a>() {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">if</span> (!str().empty()) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        node[<span class="stringliteral">&quot;description&quot;</span>] = str();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">if</span> (!prob_distr.empty()) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        node[<span class="stringliteral">&quot;distribution&quot;</span>] = prob_distr;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">return</span> node;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keyword">protected</span>:</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a6193b22129e3697e4dcf88096f6abece">  194</a></span>&#160;    std::unordered_map&lt;std::string, nlohmann::json&gt; <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a6193b22129e3697e4dcf88096f6abece">node</a>;</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a67bc9e4d1795634ad2cbe3454cda2ce5">  195</a></span>&#160;    std::vector&lt;nlohmann::json&gt; <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a67bc9e4d1795634ad2cbe3454cda2ce5">prob_distr</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  };</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1UnitData.html">  199</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1UnitData.html">UnitData</a> {</div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1UnitData.html#aa5ea38d580790faca63651e32b5da04b">  200</a></span>&#160;    int32_t lastSeenTask = -1;</div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1UnitData.html#a955c1b65ce635abf380bc18b11f413ab">  201</a></span>&#160;    int32_t lastSeenType = -1;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  };</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html">  203</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html">TreeData</a> {</div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#aacad547654c368fe94a242f8451bb2b7">  204</a></span>&#160;    nlohmann::json <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#aacad547654c368fe94a242f8451bb2b7">metadata</a>;</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#a7b1abcf24730e36df9d3bec6860c38b1">  205</a></span>&#160;    std::shared_ptr&lt;TreeNode&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#a7b1abcf24730e36df9d3bec6860c38b1">graph</a>;</div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#a39609efdd972e014dbd28729b95c7ae6">  206</a></span>&#160;    std::vector&lt;std::shared_ptr&lt;TreeNode&gt;&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#a39609efdd972e014dbd28729b95c7ae6">allNodes</a>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  };</div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html">  208</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html">TraceData</a> {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// We assign IDs to tasks so we can store them only once</span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad03751702a6be789e3dbb297e366dc2c">  210</a></span>&#160;    std::unordered_map&lt;std::shared_ptr&lt;Task&gt;, int32_t&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad03751702a6be789e3dbb297e366dc2c">taskToId_</a>;</div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aaa77239e617652ed665b7a5914a7c540">  211</a></span>&#160;    std::vector&lt;nlohmann::json&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aaa77239e617652ed665b7a5914a7c540">tasks_</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// Blackboard</span></div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a28ad6e8cec0d147000ab05684958e4a3">  214</a></span>&#160;    std::unordered_map&lt;std::string, std::string&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a28ad6e8cec0d147000ab05684958e4a3">boardKnownValues_</a>;</div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a709072804a5956d7999e9216e2a7bf8e">  215</a></span>&#160;    nlohmann::json <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a709072804a5956d7999e9216e2a7bf8e">boardUpdates_</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// Units</span></div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a53b95914240a9877128eabd8e4cdef7c">  218</a></span>&#160;    std::unordered_map&lt;UnitId, UnitData&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a53b95914240a9877128eabd8e4cdef7c">unitsInfos_</a>;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a9c0c7243ac07a1df6fc163ae9ccd1161">  219</a></span>&#160;    std::unordered_map&lt;std::string <span class="comment">/* unit_id */</span>, nlohmann::json&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a9c0c7243ac07a1df6fc163ae9ccd1161">unitsUpdates_</a>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    std::unordered_map&lt;std::string <span class="comment">/* frame_id */</span>, std::vector&lt;nlohmann::json&gt;&gt;</div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a1add7280c50a7aad6aea050dd3583de7">  221</a></span>&#160;        <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a1add7280c50a7aad6aea050dd3583de7">unitsFirstSeen_</a>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// Logs</span></div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad2d8392a893c92698780f03d9ab33b81">  224</a></span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a> <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad2d8392a893c92698780f03d9ab33b81">logs_</a>;</div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a31ed85d5512fb326793785d83454bed1">  225</a></span>&#160;    std::unordered_map&lt;std::string <span class="comment">/* unit_id */</span>, <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">Logger</a>&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a31ed85d5512fb326793785d83454bed1">unitsLogs_</a>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// Draw commands</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    std::unordered_map&lt;std::string <span class="comment">/* frame_id */</span>, std::vector&lt;nlohmann::json&gt;&gt;</div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad88aa8dec1d87844c13de364dd127c6c">  229</a></span>&#160;        <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad88aa8dec1d87844c13de364dd127c6c">drawCommands_</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// Graphs</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a434abbb6f691b05a8a809f72ba3b4363">  232</a></span>&#160;    std::unordered_map&lt;std::string <span class="comment">/* filename */</span>, <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html">TreeData</a>&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a434abbb6f691b05a8a809f72ba3b4363">trees_</a>;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ac39993adfb6aef11ce7f94fb5868280c">  233</a></span>&#160;    std::vector&lt;nlohmann::json&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ac39993adfb6aef11ce7f94fb5868280c">treesMetadata_</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// Tensors</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    std::unordered_map&lt;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        std::string <span class="comment">/* filename */</span>,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        std::unordered_map&lt;std::string <span class="comment">/* frame */</span>, nlohmann::json&gt;&gt;</div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a00a4da2899d77cec505a761b95fa287f">  239</a></span>&#160;        <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a00a4da2899d77cec505a761b95fa287f">tensors_</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    std::unordered_map&lt;std::string <span class="comment">/* name */</span>, std::string <span class="comment">/* filename */</span>&gt;</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#af38f2eda8666ea56d2576f5427207e7c">  241</a></span>&#160;        <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#af38f2eda8666ea56d2576f5427207e7c">tensorNameToFile_</a>;</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aa083906c8a3781fc66fad34e7b2a3196">  242</a></span>&#160;    std::vector&lt;nlohmann::json&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aa083906c8a3781fc66fad34e7b2a3196">heatmapsMetadata_</a>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    std::unordered_map&lt;std::string <span class="comment">/* frame_id */</span>, std::vector&lt;nlohmann::json&gt;&gt;</div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aa2462eed9fb9815f40218ae85ec7ba73">  244</a></span>&#160;        <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aa2462eed9fb9815f40218ae85ec7ba73">tensorsSummary_</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// Game values</span></div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a641432b0b979fda97086e68cb5038378">  247</a></span>&#160;    std::unordered_map&lt;std::string <span class="comment">/* frame_id */</span>, nlohmann::json&gt; <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a641432b0b979fda97086e68cb5038378">gameValues_</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  };</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  int32_t <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#acb76899190cc3a8720cc4b14c30ac658">getUnitTaskId</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* s, <a class="code" href="structcherrypi_1_1Unit.html">Unit</a>* unit);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  std::string <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#acd11a7fe54d0d4956c0b6b5b28b07ac1">getBoardValueAsString</a>(<a class="code" href="classcherrypi_1_1Blackboard.html#a97361313d1b02701a70edf8db4595d67">Blackboard::Data</a> <span class="keyword">const</span>&amp; value);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a50d13d0d242b5a034562de7c224fac57">dumpGameUpcs</a>(<a class="code" href="classcherrypi_1_1State.html">State</a>* s);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#af6026800684c31548032c9214a18b76e">writeTrees</a>(std::string <span class="keyword">const</span>&amp; dumpDirectory);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a7fe899aa2488e89389dd70c4436a5f73">writeTensors</a>(std::string <span class="keyword">const</span>&amp; dumpDirectory);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  nlohmann::json <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a2a7220d1f64873389322260261fbe436">getTensorSummary</a>(std::string <span class="keyword">const</span>&amp; name, at::Tensor <span class="keyword">const</span>&amp; t);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  nlohmann::json <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#aea4c85981497e22bfdbdefa2f3fc6e7f">getTensor1d</a>(at::Tensor <span class="keyword">const</span>&amp; t);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#a05d2e098d035061fc066a2faf87f9a56">  258</a></span>&#160;  std::string <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a05d2e098d035061fc066a2faf87f9a56">replayFileName_</a>;</div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">  259</a></span>&#160;  <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html">TraceData</a> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">trace_</a>;</div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#a0ae4f43c58eb54c21e6e4c39b21feefa">  260</a></span>&#160;  std::unique_ptr&lt;CherryVisLogSink&gt; <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a0ae4f43c58eb54c21e6e4c39b21feefa">logSink_</a>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;};</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisLogSink.html">  263</a></span>&#160;<span class="keyword">class </span><a class="code" href="classcherrypi_1_1CherryVisLogSink.html">CherryVisLogSink</a> : <span class="keyword">public</span> google::LogSink {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisLogSink.html#ad323aba3cedaca6ee11dd524de11efe6">  265</a></span>&#160;  <a class="code" href="classcherrypi_1_1CherryVisLogSink.html#ad323aba3cedaca6ee11dd524de11efe6">CherryVisLogSink</a>(<a class="code" href="classcherrypi_1_1CherryVisDumperModule.html">CherryVisDumperModule</a>* module, <a class="code" href="classcherrypi_1_1State.html">State</a>* state)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      : module_(module), state_(state), threadId_(<a class="code" href="namespacestd.html">std</a>::this_thread::get_id()) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    google::AddLogSink(<span class="keyword">this</span>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisLogSink.html#ab2857a9325bcd692cd09c89746d56bfd">  269</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classcherrypi_1_1CherryVisLogSink.html#ab2857a9325bcd692cd09c89746d56bfd">~CherryVisLogSink</a>() {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    google::RemoveLogSink(<span class="keyword">this</span>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisLogSink.html#ac39cd7f544c0c570961053fc37f4370f">  273</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisLogSink.html#ac39cd7f544c0c570961053fc37f4370f">send</a>(</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      google::LogSeverity severity,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* full_filename,</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename,</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordtype">int</span> line,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keyword">const</span> struct ::tm* tm_time,</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* message,</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordtype">size_t</span> message_len)<span class="keyword"> override </span>{</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// TODO: In case of self-play, the opponents share the same thread_id</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (threadId_ == std::this_thread::get_id()) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      module_-&gt;getGlobalLogger().addMessage(</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          state_,</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;          std::string(message, message_len),</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          {},</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          full_filename,</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          line,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          severity);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisLogSink.html#a092ff46b7be3e72ca7855d2321e656fd">  294</a></span>&#160;  <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html">CherryVisDumperModule</a>* <a class="code" href="classcherrypi_1_1CherryVisLogSink.html#a092ff46b7be3e72ca7855d2321e656fd">module_</a>;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisLogSink.html#afd72ffe9b14e76612bdfe4676bfe9560">  295</a></span>&#160;  <a class="code" href="classcherrypi_1_1State.html">State</a>* <a class="code" href="classcherrypi_1_1CherryVisLogSink.html#afd72ffe9b14e76612bdfe4676bfe9560">state_</a>;</div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisLogSink.html#a1a1959d4d5da262647b55d356b45c5d7">  296</a></span>&#160;  std::thread::id <a class="code" href="classcherrypi_1_1CherryVisLogSink.html#a1a1959d4d5da262647b55d356b45c5d7">threadId_</a>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;};</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> V, <span class="keyword">typename</span> W&gt;</div><div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="classcherrypi_1_1CherryVisDumperModule.html#a8e9bd865cdcfb4466e558ff2b4d06b79">  300</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a8e9bd865cdcfb4466e558ff2b4d06b79">CherryVisDumperModule::addTree</a>(</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="classcherrypi_1_1State.html">State</a>* s,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    std::string <span class="keyword">const</span>&amp; <a class="code" href="classcherrypi_1_1Module.html#ad7300b77897752ed01933510e3ce70aa">name</a>,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    T dump_node,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    V get_children,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    W root) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  std::string filename = <span class="stringliteral">&quot;tree__&quot;</span> + std::to_string(<a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">trace_</a>.<a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a434abbb6f691b05a8a809f72ba3b4363">trees_</a>.size()) +</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="stringliteral">&quot;__f&quot;</span> + std::to_string(s-&gt;<a class="code" href="classcherrypi_1_1State.html#a89332955236c46ca09175a429767fc63">currentFrame</a>()) + <span class="stringliteral">&quot;.json.zstd&quot;</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html">TreeData</a>&amp; g = <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">trace_</a>.<a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a434abbb6f691b05a8a809f72ba3b4363">trees_</a>[filename];</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  g.graph = std::make_shared&lt;TreeNode&gt;();</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  uint32_t nodesCount = 0;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  std::vector&lt;std::pair&lt;W <span class="comment">/* node */</span>, std::shared_ptr&lt;TreeNode&gt;&gt;&gt; todo;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// Process root</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  dump_node(root, g.graph);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  ++nodesCount;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  g.allNodes.push_back(g.graph);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  std::vector&lt;W&gt; childs = get_children(root);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : childs) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    todo.push_back(std::make_pair(c, g.graph));</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Process queue</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">while</span> (!todo.empty()) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keyword">auto</span> doing = todo.back();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    todo.pop_back();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Node</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    doing.second-&gt;children.emplace_back(std::make_shared&lt;TreeNode&gt;());</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    dump_node(doing.first, doing.second-&gt;children.back());</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    ++nodesCount;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    g.allNodes.push_back(doing.second-&gt;children.back());</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    std::vector&lt;W&gt; childs = get_children(doing.first);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : childs) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      todo.push_back(std::make_pair(c, doing.second-&gt;children.back()));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  g.metadata = {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      {<span class="stringliteral">&quot;frame&quot;</span>, s-&gt;<a class="code" href="classcherrypi_1_1State.html#a89332955236c46ca09175a429767fc63">currentFrame</a>()},</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      {<span class="stringliteral">&quot;name&quot;</span>, name},</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      {<span class="stringliteral">&quot;nodes&quot;</span>, nodesCount},</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      {<span class="stringliteral">&quot;filename&quot;</span>, filename},</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  };</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">trace_</a>.<a class="code" href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ac39993adfb6aef11ce7f94fb5868280c">treesMetadata_</a>.push_back(g.metadata);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a1ee9453506d3c03b33ad6d99a04362a0">to_json</a>(nlohmann::json&amp; json, <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">CherryVisDumperModule::Logger</a> <span class="keyword">const</span>&amp; logger);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a1ee9453506d3c03b33ad6d99a04362a0">to_json</a>(</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    nlohmann::json&amp; json,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="classcherrypi_1_1CherryVisDumperModule.html#a37c60fefda8540ada19fea2c0d3a1934">CherryVisDumperModule::Dumpable</a> <span class="keyword">const</span>&amp; logger);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a1ee9453506d3c03b33ad6d99a04362a0">to_json</a>(nlohmann::json&amp; json, <a class="code" href="structcherrypi_1_1Unit.html">Unit</a> <span class="keyword">const</span>* unit);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a1ee9453506d3c03b33ad6d99a04362a0">to_json</a>(nlohmann::json&amp; json, <a class="code" href="classcherrypi_1_1Vec2T.html">Position</a> <span class="keyword">const</span>&amp; p);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;} <span class="comment">// namespace cherrypi</span></div><div class="ttc" id="classcherrypi_1_1State_html"><div class="ttname"><a href="classcherrypi_1_1State.html">cherrypi::State</a></div><div class="ttdoc">Game state. </div><div class="ttdef"><b>Definition:</b> state.h:42</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a641432b0b979fda97086e68cb5038378"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a641432b0b979fda97086e68cb5038378">cherrypi::CherryVisDumperModule::TraceData::gameValues_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, nlohmann::json &gt; gameValues_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:247</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html_a67bc9e4d1795634ad2cbe3454cda2ce5"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a67bc9e4d1795634ad2cbe3454cda2ce5">cherrypi::CherryVisDumperModule::TreeNode::prob_distr</a></div><div class="ttdeci">std::vector&lt; nlohmann::json &gt; prob_distr</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:195</div></div>
<div class="ttc" id="namespacecherrypi_html_ab05e5ebd40b8067b1efffc1e08fbe299"><div class="ttname"><a href="namespacecherrypi.html#ab05e5ebd40b8067b1efffc1e08fbe299">cherrypi::FrameNum</a></div><div class="ttdeci">int FrameNum</div><div class="ttdef"><b>Definition:</b> basetypes.h:22</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_html_a4a44c89d59bd13f6333fb96fdcec9dff"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a4a44c89d59bd13f6333fb96fdcec9dff">cherrypi::CherryVisDumperModule::Logger::getStream</a></div><div class="ttdeci">LoggerStream getStream(State *state, const char *filename, int line)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:96</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo_html_acc5df2f51a1175e52ba3a3e2ed1b3a3d"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html#acc5df2f51a1175e52ba3a3e2ed1b3a3d">cherrypi::CherryVisDumperModule::Logger::TypeInfo::kName</a></div><div class="ttdeci">static constexpr const char * kName</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:45</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1UnitData_html"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1UnitData.html">cherrypi::CherryVisDumperModule::UnitData</a></div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:199</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a00a4da2899d77cec505a761b95fa287f"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a00a4da2899d77cec505a761b95fa287f">cherrypi::CherryVisDumperModule::TraceData::tensors_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::unordered_map&lt; std::string, nlohmann::json &gt; &gt; tensors_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:239</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TreeData_html_a7b1abcf24730e36df9d3bec6860c38b1"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#a7b1abcf24730e36df9d3bec6860c38b1">cherrypi::CherryVisDumperModule::TreeData::graph</a></div><div class="ttdeci">std::shared_ptr&lt; TreeNode &gt; graph</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:205</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html">cherrypi::CherryVisDumperModule::Logger::LoggerStream</a></div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:59</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a1add7280c50a7aad6aea050dd3583de7"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a1add7280c50a7aad6aea050dd3583de7">cherrypi::CherryVisDumperModule::TraceData::unitsFirstSeen_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::vector&lt; nlohmann::json &gt; &gt; unitsFirstSeen_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:221</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_af1cdf5db27ae82a842961a51d46d22b8"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#af1cdf5db27ae82a842961a51d46d22b8">cherrypi::CherryVisDumperModule::step</a></div><div class="ttdeci">virtual void step(State *s) override</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:33</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisLogSink_html"><div class="ttname"><a href="classcherrypi_1_1CherryVisLogSink.html">cherrypi::CherryVisLogSink</a></div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:263</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_ab0ac1cbe4d52ad76a4cbfc3c173ab612"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#ab0ac1cbe4d52ad76a4cbfc3c173ab612">cherrypi::CherryVisDumperModule::getUnitLogger</a></div><div class="ttdeci">Logger &amp; getUnitLogger(Unit *u)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:130</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a50d13d0d242b5a034562de7c224fac57"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a50d13d0d242b5a034562de7c224fac57">cherrypi::CherryVisDumperModule::dumpGameUpcs</a></div><div class="ttdeci">void dumpGameUpcs(State *s)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:261</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a474b16ba2868acbca21c6da82bacf98b"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a474b16ba2868acbca21c6da82bacf98b">cherrypi::CherryVisDumperModule::trace_</a></div><div class="ttdeci">TraceData trace_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:259</div></div>
<div class="ttc" id="classcherrypi_1_1State_html_a89332955236c46ca09175a429767fc63"><div class="ttname"><a href="classcherrypi_1_1State.html#a89332955236c46ca09175a429767fc63">cherrypi::State::currentFrame</a></div><div class="ttdeci">FrameNum currentFrame() const </div><div class="ttdef"><b>Definition:</b> state.h:57</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_aa2462eed9fb9815f40218ae85ec7ba73"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aa2462eed9fb9815f40218ae85ec7ba73">cherrypi::CherryVisDumperModule::TraceData::tensorsSummary_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::vector&lt; nlohmann::json &gt; &gt; tensorsSummary_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:244</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_acb76899190cc3a8720cc4b14c30ac658"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#acb76899190cc3a8720cc4b14c30ac658">cherrypi::CherryVisDumperModule::getUnitTaskId</a></div><div class="ttdeci">int32_t getUnitTaskId(State *s, Unit *unit)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:176</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html_ae356087521877c29f6ccca43bf3c1fb2"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#ae356087521877c29f6ccca43bf3c1fb2">cherrypi::CherryVisDumperModule::TreeNode::addUnitWithProb</a></div><div class="ttdeci">void addUnitWithProb(Unit *unit, float proba)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:178</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html">cherrypi::CherryVisDumperModule::TraceData</a></div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:208</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_af38f2eda8666ea56d2576f5427207e7c"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#af38f2eda8666ea56d2576f5427207e7c">cherrypi::CherryVisDumperModule::TraceData::tensorNameToFile_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::string &gt; tensorNameToFile_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:241</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a9c0c7243ac07a1df6fc163ae9ccd1161"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a9c0c7243ac07a1df6fc163ae9ccd1161">cherrypi::CherryVisDumperModule::TraceData::unitsUpdates_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, nlohmann::json &gt; unitsUpdates_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:219</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a5aa63e9a5f2cb75c406f8b03a1042b7d"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a5aa63e9a5f2cb75c406f8b03a1042b7d">cherrypi::CherryVisDumperModule::dumpTerrainHeatmaps</a></div><div class="ttdeci">void dumpTerrainHeatmaps(State *s, std::unordered_map&lt; std::string, ag::Variant &gt; const &amp;tensors, std::array&lt; int, 2 &gt; const &amp;topLeftPixel, std::array&lt; float, 2 &gt; const &amp;scalingToPixels)</div><div class="ttdoc">Dumps a heatmap that can be displayed as overlay of the terrain. </div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:375</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_a209bd2a88f6d8cd48d45a860688b7283"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a209bd2a88f6d8cd48d45a860688b7283">cherrypi::CherryVisDumperModule::Logger::LoggerStream::filename_</a></div><div class="ttdeci">const char * filename_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:92</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html_a26e227c276dfcf8bad85617f461dc4de"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a26e227c276dfcf8bad85617f461dc4de">cherrypi::CherryVisDumperModule::TreeNode::to_json</a></div><div class="ttdeci">nlohmann::json to_json()</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:183</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisLogSink_html_a092ff46b7be3e72ca7855d2321e656fd"><div class="ttname"><a href="classcherrypi_1_1CherryVisLogSink.html#a092ff46b7be3e72ca7855d2321e656fd">cherrypi::CherryVisLogSink::module_</a></div><div class="ttdeci">CherryVisDumperModule * module_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:294</div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace. </div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisLogSink_html_afd72ffe9b14e76612bdfe4676bfe9560"><div class="ttname"><a href="classcherrypi_1_1CherryVisLogSink.html#afd72ffe9b14e76612bdfe4676bfe9560">cherrypi::CherryVisLogSink::state_</a></div><div class="ttdeci">State * state_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:295</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a8e9bd865cdcfb4466e558ff2b4d06b79"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a8e9bd865cdcfb4466e558ff2b4d06b79">cherrypi::CherryVisDumperModule::addTree</a></div><div class="ttdeci">void addTree(State *s, std::string const &amp;name, T dump_node, V get_children, W root)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:300</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a28ad6e8cec0d147000ab05684958e4a3"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a28ad6e8cec0d147000ab05684958e4a3">cherrypi::CherryVisDumperModule::TraceData::boardKnownValues_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::string &gt; boardKnownValues_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:214</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TreeData_html_a39609efdd972e014dbd28729b95c7ae6"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#a39609efdd972e014dbd28729b95c7ae6">cherrypi::CherryVisDumperModule::TreeData::allNodes</a></div><div class="ttdeci">std::vector&lt; std::shared_ptr&lt; TreeNode &gt; &gt; allNodes</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:206</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_ad03751702a6be789e3dbb297e366dc2c"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad03751702a6be789e3dbb297e366dc2c">cherrypi::CherryVisDumperModule::TraceData::taskToId_</a></div><div class="ttdeci">std::unordered_map&lt; std::shared_ptr&lt; Task &gt;, int32_t &gt; taskToId_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:210</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a5e192b2fadf69b48d6c1a093e7003fbd"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a5e192b2fadf69b48d6c1a093e7003fbd">cherrypi::CherryVisDumperModule::writeGameSummary</a></div><div class="ttdeci">static void writeGameSummary(State *final_state, std::string const &amp;file)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:196</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a37c60fefda8540ada19fea2c0d3a1934"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a37c60fefda8540ada19fea2c0d3a1934">cherrypi::CherryVisDumperModule::Dumpable</a></div><div class="ttdeci">std::variant&lt; Unit *, Position, int, float, std::string &gt; Dumpable</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:39</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a9d24283fa83f8ba41a75d5320bfe418a"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a9d24283fa83f8ba41a75d5320bfe418a">cherrypi::CherryVisDumperModule::onDrawCommand</a></div><div class="ttdeci">void onDrawCommand(State *s, tc::Client::Command const &amp;command)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:153</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a31ed85d5512fb326793785d83454bed1"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a31ed85d5512fb326793785d83454bed1">cherrypi::CherryVisDumperModule::TraceData::unitsLogs_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, Logger &gt; unitsLogs_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:225</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_a81571f9401d43dd6d46a1c35c69ab5aa"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a81571f9401d43dd6d46a1c35c69ab5aa">cherrypi::CherryVisDumperModule::Logger::LoggerStream::LoggerStream</a></div><div class="ttdeci">LoggerStream(State *state, Logger &amp;logger, const char *filename, int line)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:62</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisLogSink_html_ac39cd7f544c0c570961053fc37f4370f"><div class="ttname"><a href="classcherrypi_1_1CherryVisLogSink.html#ac39cd7f544c0c570961053fc37f4370f">cherrypi::CherryVisLogSink::send</a></div><div class="ttdeci">virtual void send(google::LogSeverity severity, const char *full_filename, const char *base_filename, int line, const struct::tm *tm_time, const char *message, size_t message_len) override</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:273</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html">cherrypi::CherryVisDumperModule::TreeNode</a></div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:164</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_html_ac3eb4994eab5e28b4e583bca5c907dd1"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#ac3eb4994eab5e28b4e583bca5c907dd1">cherrypi::CherryVisDumperModule::Logger::ACCEPT_TYPE</a></div><div class="ttdeci">ACCEPT_TYPE(Unit *)</div></div>
<div class="ttc" id="classcherrypi_1_1Module_html_ad7300b77897752ed01933510e3ce70aa"><div class="ttname"><a href="classcherrypi_1_1Module.html#ad7300b77897752ed01933510e3ce70aa">cherrypi::Module::name</a></div><div class="ttdeci">std::string name()</div><div class="ttdef"><b>Definition:</b> module.cpp:41</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a709072804a5956d7999e9216e2a7bf8e"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a709072804a5956d7999e9216e2a7bf8e">cherrypi::CherryVisDumperModule::TraceData::boardUpdates_</a></div><div class="ttdeci">nlohmann::json boardUpdates_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:215</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a24af1767050d1f9ab4bb9cd91b0d9d0f"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a24af1767050d1f9ab4bb9cd91b0d9d0f">cherrypi::CherryVisDumperModule::onGameStart</a></div><div class="ttdeci">virtual void onGameStart(State *s) override</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:86</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_ae4e1d8b338936a3cad35602c362e564a"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#ae4e1d8b338936a3cad35602c362e564a">cherrypi::CherryVisDumperModule::Logger::LoggerStream::message_</a></div><div class="ttdeci">std::stringstream message_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:88</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_af4c7379270a46864287deb60ad5f1a4e"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#af4c7379270a46864287deb60ad5f1a4e">cherrypi::CherryVisDumperModule::Logger::LoggerStream::line_</a></div><div class="ttdeci">int line_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:93</div></div>
<div class="ttc" id="classcherrypi_1_1Blackboard_html_a97361313d1b02701a70edf8db4595d67"><div class="ttname"><a href="classcherrypi_1_1Blackboard.html#a97361313d1b02701a70edf8db4595d67">cherrypi::Blackboard::Data</a></div><div class="ttdeci">mapbox::util::variant&lt; bool, int, float, double, std::string, Position, std::shared_ptr&lt; SharedController &gt;, std::unordered_map&lt; int, int &gt;&gt; Data</div><div class="ttdoc">A variant of types that are allowed in the Blackboard&amp;#39;s key-value storage. </div><div class="ttdef"><b>Definition:</b> blackboard.h:99</div></div>
<div class="ttc" id="structcherrypi_1_1Unit_html_acf03d67ca94d4f884d471f48c12d0635"><div class="ttname"><a href="structcherrypi_1_1Unit.html#acf03d67ca94d4f884d471f48c12d0635">cherrypi::Unit::id</a></div><div class="ttdeci">UnitId id</div><div class="ttdef"><b>Definition:</b> unitsinfo.h:36</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_ae8d6567980890d2781e135fe6c8de239"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#ae8d6567980890d2781e135fe6c8de239">cherrypi::CherryVisDumperModule::~CherryVisDumperModule</a></div><div class="ttdeci">virtual ~CherryVisDumperModule()=default</div></div>
<div class="ttc" id="structcherrypi_1_1Unit_html"><div class="ttname"><a href="structcherrypi_1_1Unit.html">cherrypi::Unit</a></div><div class="ttdoc">Represents a unit in the game. </div><div class="ttdef"><b>Definition:</b> unitsinfo.h:35</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html_a264867b8aad8905c3bdbecd27e0c545a"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a264867b8aad8905c3bdbecd27e0c545a">cherrypi::CherryVisDumperModule::TreeNode::setId</a></div><div class="ttdeci">void setId(int32_t id, std::string prefix=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:174</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_acd11a7fe54d0d4956c0b6b5b28b07ac1"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#acd11a7fe54d0d4956c0b6b5b28b07ac1">cherrypi::CherryVisDumperModule::getBoardValueAsString</a></div><div class="ttdeci">std::string getBoardValueAsString(Blackboard::Data const &amp;value)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:256</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_ac39993adfb6aef11ce7f94fb5868280c"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ac39993adfb6aef11ce7f94fb5868280c">cherrypi::CherryVisDumperModule::TraceData::treesMetadata_</a></div><div class="ttdeci">std::vector&lt; nlohmann::json &gt; treesMetadata_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:233</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_html_a1ee9453506d3c03b33ad6d99a04362a0"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a1ee9453506d3c03b33ad6d99a04362a0">cherrypi::CherryVisDumperModule::Logger::to_json</a></div><div class="ttdeci">nlohmann::json to_json() const </div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:108</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a704b8766018e5d5035b93973b539f4d1"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a704b8766018e5d5035b93973b539f4d1">cherrypi::CherryVisDumperModule::setReplayFile</a></div><div class="ttdeci">void setReplayFile(std::string const &amp;replayFile)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:118</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html_a4537e5d1b0bac91856dcf77b1c5196af"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a4537e5d1b0bac91856dcf77b1c5196af">cherrypi::CherryVisDumperModule::TreeNode::setModule</a></div><div class="ttdeci">void setModule(std::string name)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:168</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_html_a7ecdafbd63d3bdfa53072c411ac548a7"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#a7ecdafbd63d3bdfa53072c411ac548a7">cherrypi::CherryVisDumperModule::Logger::logs_</a></div><div class="ttdeci">std::vector&lt; nlohmann::json &gt; logs_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:113</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_a80dd87b8d734dbc168b34f93deacba2f"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a80dd87b8d734dbc168b34f93deacba2f">cherrypi::CherryVisDumperModule::Logger::LoggerStream::~LoggerStream</a></div><div class="ttdeci">~LoggerStream()</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:64</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_aacf43d13ce7ad7caac87c33ba2b50571"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#aacf43d13ce7ad7caac87c33ba2b50571">cherrypi::CherryVisDumperModule::dumpGameValue</a></div><div class="ttdeci">void dumpGameValue(State *s, std::string const &amp;key, float value)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:158</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_aaef546c69332b507729add7b78281f0b"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#aaef546c69332b507729add7b78281f0b">cherrypi::CherryVisDumperModule::dumpTensorsSummary</a></div><div class="ttdeci">void dumpTensorsSummary(State *s, std::unordered_map&lt; std::string, ag::Variant &gt; const &amp;tensors)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:360</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html">cherrypi::CherryVisDumperModule</a></div><div class="ttdoc">Records bot internal state and dumps it to a file readable by CherryVis. </div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:36</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_af6026800684c31548032c9214a18b76e"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#af6026800684c31548032c9214a18b76e">cherrypi::CherryVisDumperModule::writeTrees</a></div><div class="ttdeci">void writeTrees(std::string const &amp;dumpDirectory)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:294</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_a1f48909205b82a16d4b7d68c2166aca5"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#a1f48909205b82a16d4b7d68c2166aca5">cherrypi::CherryVisDumperModule::Logger::LoggerStream::state_</a></div><div class="ttdeci">State * state_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:90</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a2c998f5e0b6cb72d395b7ada23ae10b1"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a2c998f5e0b6cb72d395b7ada23ae10b1">cherrypi::CherryVisDumperModule::getGlobalLogger</a></div><div class="ttdeci">Logger &amp; getGlobalLogger()</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:126</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a0ae4f43c58eb54c21e6e4c39b21feefa"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a0ae4f43c58eb54c21e6e4c39b21feefa">cherrypi::CherryVisDumperModule::logSink_</a></div><div class="ttdeci">std::unique_ptr&lt; CherryVisLogSink &gt; logSink_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:260</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_ad2d8392a893c92698780f03d9ab33b81"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad2d8392a893c92698780f03d9ab33b81">cherrypi::CherryVisDumperModule::TraceData::logs_</a></div><div class="ttdeci">Logger logs_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:224</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisLogSink_html_a1a1959d4d5da262647b55d356b45c5d7"><div class="ttname"><a href="classcherrypi_1_1CherryVisLogSink.html#a1a1959d4d5da262647b55d356b45c5d7">cherrypi::CherryVisLogSink::threadId_</a></div><div class="ttdeci">std::thread::id threadId_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:296</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_ad88aa8dec1d87844c13de364dd127c6c"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#ad88aa8dec1d87844c13de364dd127c6c">cherrypi::CherryVisDumperModule::TraceData::drawCommands_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::vector&lt; nlohmann::json &gt; &gt; drawCommands_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:229</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_aae66a6b76cb03830328ec6ca00b6d510"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#aae66a6b76cb03830328ec6ca00b6d510">cherrypi::CherryVisDumperModule::Logger::LoggerStream::logger_</a></div><div class="ttdeci">Logger &amp; logger_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:91</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a53b95914240a9877128eabd8e4cdef7c"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a53b95914240a9877128eabd8e4cdef7c">cherrypi::CherryVisDumperModule::TraceData::unitsInfos_</a></div><div class="ttdeci">std::unordered_map&lt; UnitId, UnitData &gt; unitsInfos_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:218</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TreeData_html_aacad547654c368fe94a242f8451bb2b7"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html#aacad547654c368fe94a242f8451bb2b7">cherrypi::CherryVisDumperModule::TreeData::metadata</a></div><div class="ttdeci">nlohmann::json metadata</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:204</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisLogSink_html_ab2857a9325bcd692cd09c89746d56bfd"><div class="ttname"><a href="classcherrypi_1_1CherryVisLogSink.html#ab2857a9325bcd692cd09c89746d56bfd">cherrypi::CherryVisLogSink::~CherryVisLogSink</a></div><div class="ttdeci">virtual ~CherryVisLogSink()</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:269</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_aaa77239e617652ed665b7a5914a7c540"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aaa77239e617652ed665b7a5914a7c540">cherrypi::CherryVisDumperModule::TraceData::tasks_</a></div><div class="ttdeci">std::vector&lt; nlohmann::json &gt; tasks_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:211</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html_aeb7cd5da48373c20327b4e2f187fb607"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#aeb7cd5da48373c20327b4e2f187fb607">cherrypi::CherryVisDumperModule::TreeNode::children</a></div><div class="ttdeci">std::vector&lt; std::shared_ptr&lt; TreeNode &gt; &gt; children</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:166</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html_aec705fbf0af1c3e7a042f9e3530f8d88"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#aec705fbf0af1c3e7a042f9e3530f8d88">cherrypi::CherryVisDumperModule::TreeNode::setFrame</a></div><div class="ttdeci">void setFrame(FrameNum f)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:171</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisLogSink_html_ad323aba3cedaca6ee11dd524de11efe6"><div class="ttname"><a href="classcherrypi_1_1CherryVisLogSink.html#ad323aba3cedaca6ee11dd524de11efe6">cherrypi::CherryVisLogSink::CherryVisLogSink</a></div><div class="ttdeci">CherryVisLogSink(CherryVisDumperModule *module, State *state)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:265</div></div>
<div class="ttc" id="namespacecherrypi_html"><div class="ttname"><a href="namespacecherrypi.html">cherrypi</a></div><div class="ttdoc">Main namespace for bot-related code. </div><div class="ttdef"><b>Definition:</b> areainfo.cpp:17</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_aea4c85981497e22bfdbdefa2f3fc6e7f"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#aea4c85981497e22bfdbdefa2f3fc6e7f">cherrypi::CherryVisDumperModule::getTensor1d</a></div><div class="ttdeci">nlohmann::json getTensor1d(at::Tensor const &amp;t)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:350</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_aa083906c8a3781fc66fad34e7b2a3196"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#aa083906c8a3781fc66fad34e7b2a3196">cherrypi::CherryVisDumperModule::TraceData::heatmapsMetadata_</a></div><div class="ttdeci">std::vector&lt; nlohmann::json &gt; heatmapsMetadata_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:242</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a2a7220d1f64873389322260261fbe436"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a2a7220d1f64873389322260261fbe436">cherrypi::CherryVisDumperModule::getTensorSummary</a></div><div class="ttdeci">nlohmann::json getTensorSummary(std::string const &amp;name, at::Tensor const &amp;t)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:319</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a05d2e098d035061fc066a2faf87f9a56"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a05d2e098d035061fc066a2faf87f9a56">cherrypi::CherryVisDumperModule::replayFileName_</a></div><div class="ttdeci">std::string replayFileName_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:258</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_html_af47328322156d39ef0a10142eda8522d"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html#af47328322156d39ef0a10142eda8522d">cherrypi::CherryVisDumperModule::Logger::addMessage</a></div><div class="ttdeci">void addMessage(State *state, std::string message, std::vector&lt; nlohmann::json &gt; attachments={}, const char *full_filename=&quot;&quot;, int line=0, google::LogSeverity severity=0)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:433</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode_html_a6193b22129e3697e4dcf88096f6abece"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1TreeNode.html#a6193b22129e3697e4dcf88096f6abece">cherrypi::CherryVisDumperModule::TreeNode::node</a></div><div class="ttdeci">std::unordered_map&lt; std::string, nlohmann::json &gt; node</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:194</div></div>
<div class="ttc" id="classcherrypi_1_1Vec2T_html"><div class="ttname"><a href="classcherrypi_1_1Vec2T.html">cherrypi::Vec2T&lt; int &gt;</a></div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_a7fe899aa2488e89389dd70c4436a5f73"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#a7fe899aa2488e89389dd70c4436a5f73">cherrypi::CherryVisDumperModule::writeTensors</a></div><div class="ttdeci">void writeTensors(std::string const &amp;dumpDirectory)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:424</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_html"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger.html">cherrypi::CherryVisDumperModule::Logger</a></div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:41</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_ac1fe830f69e18fa70f14104e0e875c41"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#ac1fe830f69e18fa70f14104e0e875c41">cherrypi::CherryVisDumperModule::Logger::LoggerStream::attachments_</a></div><div class="ttdeci">std::vector&lt; nlohmann::json &gt; attachments_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:89</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo_html"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1TypeInfo.html">cherrypi::CherryVisDumperModule::Logger::TypeInfo</a></div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:44</div></div>
<div class="ttc" id="classcherrypi_1_1Module_html"><div class="ttname"><a href="classcherrypi_1_1Module.html">cherrypi::Module</a></div><div class="ttdoc">Interface for bot modules. </div><div class="ttdef"><b>Definition:</b> module.h:30</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_html_ab99da1772de414fdfb05f5d9423688b5"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule.html#ab99da1772de414fdfb05f5d9423688b5">cherrypi::CherryVisDumperModule::onGameEnd</a></div><div class="ttdeci">virtual void onGameEnd(State *s) override</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.cpp:95</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TraceData_html_a434abbb6f691b05a8a809f72ba3b4363"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TraceData.html#a434abbb6f691b05a8a809f72ba3b4363">cherrypi::CherryVisDumperModule::TraceData::trees_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, TreeData &gt; trees_</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:232</div></div>
<div class="ttc" id="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream_html_adbd90dc7e25beb72f05b564f92b8089d"><div class="ttname"><a href="classcherrypi_1_1CherryVisDumperModule_1_1Logger_1_1LoggerStream.html#adbd90dc7e25beb72f05b564f92b8089d">cherrypi::CherryVisDumperModule::Logger::LoggerStream::operator&lt;&lt;</a></div><div class="ttdeci">LoggerStream &amp; operator&lt;&lt;(T const &amp;m)</div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:70</div></div>
<div class="ttc" id="structcherrypi_1_1CherryVisDumperModule_1_1TreeData_html"><div class="ttname"><a href="structcherrypi_1_1CherryVisDumperModule_1_1TreeData.html">cherrypi::CherryVisDumperModule::TreeData</a></div><div class="ttdef"><b>Definition:</b> cherryvisdumper.h:203</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 20 2019 19:40:33 for TorchCraftAI by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
