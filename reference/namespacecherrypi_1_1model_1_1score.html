<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>TorchCraftAI: cherrypi::model::score Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TorchCraftAI
   </div>
   <div id="projectbrief">A bot for machine learning research on StarCraft: Brood War</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecherrypi.html">cherrypi</a></li><li class="navelem"><a class="el" href="namespacecherrypi_1_1model.html">model</a></li><li class="navelem"><a class="el" href="namespacecherrypi_1_1model_1_1score.html">score</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cherrypi::model::score Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a48fea147544a1d5ea0ca3cb804816332"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecherrypi_1_1model_1_1score.html#a48fea147544a1d5ea0ca3cb804816332">betaSampling</a> (float x, float a, float b)</td></tr>
<tr class="memdesc:a48fea147544a1d5ea0ca3cb804816332"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a sample from a Beta(a, b) if you have "x" a sample from a uniform in 0,1: x^(a-1)*(1-x)^(b-1)/(gamma(a)*gamma(b)/gamma(a+b)) with gamma <a href="http://www.cplusplus.com/reference/cmath/tgamma/">http://www.cplusplus.com/reference/cmath/tgamma/</a>.  <a href="#a48fea147544a1d5ea0ca3cb804816332">More...</a><br /></td></tr>
<tr class="separator:a48fea147544a1d5ea0ca3cb804816332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca7553c07c6d7d2008d3e9bf90b87c7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecherrypi_1_1model_1_1score.html#aaca7553c07c6d7d2008d3e9bf90b87c7">thompsonSamplingScore</a> (<a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> const &amp;count, float thompson_a, float thompson_b)</td></tr>
<tr class="memdesc:aaca7553c07c6d7d2008d3e9bf90b87c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a score for build order j based on Thompson sampling (stochastic)  <a href="#aaca7553c07c6d7d2008d3e9bf90b87c7">More...</a><br /></td></tr>
<tr class="separator:aaca7553c07c6d7d2008d3e9bf90b87c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec388a3983ee7bee70b46d5c2facf182"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecherrypi_1_1model_1_1score.html#aec388a3983ee7bee70b46d5c2facf182">thompsonRollingSamplingScore</a> (<a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> const &amp;count, float thompson_a, float thompson_b, float thompson_gamma)</td></tr>
<tr class="memdesc:aec388a3983ee7bee70b46d5c2facf182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a Thompson sampling score on a rolling average (w/ exponential decay)  <a href="#aec388a3983ee7bee70b46d5c2facf182">More...</a><br /></td></tr>
<tr class="separator:aec388a3983ee7bee70b46d5c2facf182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28f82b8d43d71fbd8901cbff1cf7d399"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecherrypi_1_1model_1_1score.html#a28f82b8d43d71fbd8901cbff1cf7d399">ucb1Score</a> (<a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> const &amp;count, int allStrategyGamesCount, float ucb1_c)</td></tr>
<tr class="memdesc:a28f82b8d43d71fbd8901cbff1cf7d399"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes UCB1 score providing build order j: (win_j / total_j) + sqrt(2 * log(sum(total)) / total_j) Untested build orders get a priority.  <a href="#a28f82b8d43d71fbd8901cbff1cf7d399">More...</a><br /></td></tr>
<tr class="separator:a28f82b8d43d71fbd8901cbff1cf7d399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749fbe42c3052b33e258ae099179b9c6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecherrypi_1_1model_1_1score.html#a749fbe42c3052b33e258ae099179b9c6">ucb1RollingScore</a> (<a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> const &amp;count, int allStrategyGamesCount, float ucb1_c, float ucb1_gamma)</td></tr>
<tr class="memdesc:a749fbe42c3052b33e258ae099179b9c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes UCB1 score on a rolling average (w/ exponential decay)  <a href="#a749fbe42c3052b33e258ae099179b9c6">More...</a><br /></td></tr>
<tr class="separator:a749fbe42c3052b33e258ae099179b9c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeafe8b61aa7297aab7f1ae2f785f8032"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecherrypi_1_1model_1_1score.html#aeafe8b61aa7297aab7f1ae2f785f8032">expMooRollingSamplingScore</a> (<a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> const &amp;count, float moo_mult, float moo_gamma)</td></tr>
<tr class="memdesc:aeafe8b61aa7297aab7f1ae2f785f8032"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes Exp Moo score on a rolling average (w/ exponential decay)  <a href="#aeafe8b61aa7297aab7f1ae2f785f8032">More...</a><br /></td></tr>
<tr class="separator:aeafe8b61aa7297aab7f1ae2f785f8032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970b046b0272061b4d4f44b2bd8ea707"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecherrypi_1_1model_1_1score.html#a970b046b0272061b4d4f44b2bd8ea707">maxExploitScore</a> (<a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> const &amp;count, int allStrategyGamesCount, float ucb1_c)</td></tr>
<tr class="memdesc:a970b046b0272061b4d4f44b2bd8ea707"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes UCB1-style score providing build order j: (win_j / total_j) + sqrt(2 * log(sum(total)) / total_j) but builds with high win rate get first priority Untested build orders get second priority.  <a href="#a970b046b0272061b4d4f44b2bd8ea707">More...</a><br /></td></tr>
<tr class="separator:a970b046b0272061b4d4f44b2bd8ea707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6809702f74a71f690a6cc1193bc2d34"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecherrypi_1_1model_1_1score.html#ae6809702f74a71f690a6cc1193bc2d34">chooseBuildOrder</a> (std::map&lt; std::string, <a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> &gt; const &amp;buildOrderCounts, std::string scoreAlgorithm, float ucb1_c, float bandit_gamma, float thompson_a, float thompson_b, float moo_mult)</td></tr>
<tr class="memdesc:ae6809702f74a71f690a6cc1193bc2d34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chooses the build order with maximum score according to the provided scoring algorithm The assumption is that this is called once per game, or at least acted upon based on the last call!  <a href="#ae6809702f74a71f690a6cc1193bc2d34">More...</a><br /></td></tr>
<tr class="separator:ae6809702f74a71f690a6cc1193bc2d34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a48fea147544a1d5ea0ca3cb804816332"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cherrypi::model::score::betaSampling </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a sample from a Beta(a, b) if you have "x" a sample from a uniform in 0,1: x^(a-1)*(1-x)^(b-1)/(gamma(a)*gamma(b)/gamma(a+b)) with gamma <a href="http://www.cplusplus.com/reference/cmath/tgamma/">http://www.cplusplus.com/reference/cmath/tgamma/</a>. </p>

</div>
</div>
<a class="anchor" id="ae6809702f74a71f690a6cc1193bc2d34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string cherrypi::model::score::chooseBuildOrder </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, <a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>buildOrderCounts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>scoreAlgorithm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ucb1_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>bandit_gamma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>thompson_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>thompson_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>moo_mult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chooses the build order with maximum score according to the provided scoring algorithm The assumption is that this is called once per game, or at least acted upon based on the last call! </p>

</div>
</div>
<a class="anchor" id="aeafe8b61aa7297aab7f1ae2f785f8032"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cherrypi::model::score::expMooRollingSamplingScore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> &amp;&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>moo_mult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>moo_gamma</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes Exp Moo score on a rolling average (w/ exponential decay) </p>

</div>
</div>
<a class="anchor" id="a970b046b0272061b4d4f44b2bd8ea707"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cherrypi::model::score::maxExploitScore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> &amp;&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>allStrategyGamesCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ucb1_c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes UCB1-style score providing build order j: (win_j / total_j) + sqrt(2 * log(sum(total)) / total_j) but builds with high win rate get first priority Untested build orders get second priority. </p>

</div>
</div>
<a class="anchor" id="aec388a3983ee7bee70b46d5c2facf182"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cherrypi::model::score::thompsonRollingSamplingScore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> const &amp;&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>thompson_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>thompson_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>thompson_gamma</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes a Thompson sampling score on a rolling average (w/ exponential decay) </p>

</div>
</div>
<a class="anchor" id="aaca7553c07c6d7d2008d3e9bf90b87c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cherrypi::model::score::thompsonSamplingScore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> const &amp;&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>thompson_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>thompson_b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes a score for build order j based on Thompson sampling (stochastic) </p>
<p>For each opening you keep S and F (Successes and Failures, or S and N and F = N-S).</p>
<p>a and b are hyperparameters. A good initial guess is a=1, b=1. In a game, for each build order i that we can start with: sample p_i in Beta(S_i + a, F_i + b) // here you get your stochasticity j = argmax over all p_i play with build order j update S_j and F_j </p>

</div>
</div>
<a class="anchor" id="a749fbe42c3052b33e258ae099179b9c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cherrypi::model::score::ucb1RollingScore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> &amp;&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>allStrategyGamesCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ucb1_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ucb1_gamma</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes UCB1 score on a rolling average (w/ exponential decay) </p>

</div>
</div>
<a class="anchor" id="a28f82b8d43d71fbd8901cbff1cf7d399"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float cherrypi::model::score::ucb1Score </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcherrypi_1_1model_1_1BuildOrderCount.html">cherrypi::model::BuildOrderCount</a> &amp;&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>allStrategyGamesCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ucb1_c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes UCB1 score providing build order j: (win_j / total_j) + sqrt(2 * log(sum(total)) / total_j) Untested build orders get a priority. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 12 2019 12:44:04 for TorchCraftAI by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
